<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Work Projects — Thomas Watson</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&display=swap" rel="stylesheet">
    <style>
        /* --- Global Styles --- */
        * { box-sizing: border-box; margin: 0; padding: 0; }
        :root {
            --primary-blue: #0000FF; --text-primary: #212529; --text-secondary: #6c757d;
            --background: #f8f9fa; --card-background: #ffffff; --border-color: #dee2e6;
            --border-light: #e9ecef;
        }
        html { scroll-behavior: smooth; }
        body {
            font-family: 'Montserrat', sans-serif; background-color: var(--background);
            color: var(--text-primary); line-height: 1.6; padding: 40px 20px; font-weight: 300;
        }
        a { color: var(--primary-blue); text-decoration: none; font-weight: 500; transition: opacity 0.2s ease; }
        a:hover { text-decoration: none; opacity: 0.7; }

        /* --- Header & Footer --- */
        header, footer { text-align: center; max-width: 900px; margin: 0 auto; }
        header { margin-bottom: 70px; }
        h1 { font-weight: 600; font-size: 2.5rem; letter-spacing: 1px; margin-bottom: 10px; }
        footer { margin-top: 100px; padding-top: 40px; border-top: 1px solid var(--border-color); color: var(--text-secondary); font-size: 0.9rem; }
        footer p:first-child a { margin: 0 10px; }
        .back-link { font-size: 1rem; color: var(--text-secondary); display: inline-block; margin-top: 10px; transition: color 0.2s ease; }
        .back-link:hover { color: var(--primary-blue); opacity: 1; }

        /* --- Project Accordion List --- */
        .project-list { max-width: 900px; margin: 0 auto; list-style: none; }
        .project-item {
            background-color: var(--card-background); border: 1px solid var(--border-light);
            border-radius: 18px; margin-bottom: 30px; overflow: hidden;
            box-shadow: 0 4px 15px rgba(0,0,0,0.06);
            transition: box-shadow 0.3s ease, margin-bottom 0.4s ease, border-color 0.4s ease, background-color 0.4s ease;
        }

        /* --- Project Preview (Clickable Header) --- */
        .project-preview {
            padding: 20px; cursor: pointer; display: flex; align-items: center; gap: 20px;
            transition: background-color 0.2s ease, opacity 0.4s ease, max-height 0.4s ease, padding 0.4s ease;
            position: relative; max-height: 200px; opacity: 1;
        }
        .project-preview:hover { background-color: #fcfcfc; }
        .project-list.item-active .project-item:not(.active) .project-preview {
            opacity: 0; max-height: 0; padding-top: 0; padding-bottom: 0;
            pointer-events: none; border-width: 0; margin-bottom: 0;
        }
        .project-list.item-active .project-item:not(.active) { margin-bottom: 0; box-shadow: none; border-color: transparent; background-color: transparent; }
        .preview-image-container { width: 100px; height: 100px; border-radius: 12px; overflow: hidden; flex-shrink: 0; position: relative; background-color: #eee; }
        .preview-image-container img { display: block; width: 100%; height: 100%; object-fit: cover; position: absolute; top: 0; left: 0; opacity: 0; transition: opacity 0.8s ease-in-out; }
        .preview-image-container img.active { opacity: 1; }
        .preview-text { flex-grow: 1; position: relative; }
        .project-preview h3 { font-size: 1.25rem; font-weight: 500; margin-bottom: 5px; color: var(--text-primary); padding-right: 40px; }
        .project-preview .meta { font-size: 0.9rem; color: var(--text-secondary); font-style: italic; font-weight: 300; }
        .preview-company-logo { position: absolute; top: 0; right: 0; height: 20px; max-width: 80px; opacity: 0.4; filter: grayscale(100%); }
        .preview-icon { display: inline-block; font-size: 1.5rem; color: var(--text-secondary); transition: transform 0.4s cubic-bezier(0.25, 0.1, 0.25, 1); margin-left: 15px; flex-shrink: 0; line-height: 1; transform: rotate(0deg); }
        .project-item.active .preview-icon { transform: rotate(-180deg); }

        /* --- Project Details (Hidden Content) --- */
        .project-details {
            max-height: 0; overflow: hidden;
            transition: max-height 0.6s cubic-bezier(0.4, 0, 0.2, 1), padding-top 0.6s cubic-bezier(0.4, 0, 0.2, 1), padding-bottom 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            border-top: 1px solid transparent; padding: 0 30px;
        }
        .project-item.active .project-details { max-height: 2500px; padding-top: 30px; padding-bottom: 30px; border-top-color: var(--border-light); }
        .project-description { margin-top: 30px; }
        .project-description p { margin-bottom: 15px; color: #495057; font-weight: 300; }
        /* Style for blue labels */
        .project-description strong { font-weight: 600; color: var(--primary-blue); display: block; margin-bottom: 5px; }
        /* Style for bold text within paragraphs (not blue) */
        .project-description p b { font-weight: 500; color: var(--text-primary); }
         .details-links { margin-top: 25px; }

        /* --- Slideshow Styles --- */
        .slideshow-container { position: relative; max-width: 100%; margin: 0 auto; overflow: hidden; border-radius: 12px; background-color: #eee; }
        .slide { display: none; width: 100%; animation: fadeEffect 0.8s ease; }
        .slide img { display: block; width: 100%; height: auto; max-height: 550px; object-fit: cover; }
        .slide.active { display: block; }
        @keyframes fadeEffect { from { opacity: 0.4; } to { opacity: 1; } }
        .prev, .next { cursor: pointer; position: absolute; top: 50%; transform: translateY(-50%); width: auto; padding: 16px; color: white; font-weight: bold; font-size: 20px; background-color: rgba(0, 0, 0, 0.3); border-radius: 0 3px 3px 0; user-select: none; transition: background-color 0.3s ease; }
        .next { right: 0; border-radius: 3px 0 0 3px; }
        .prev:hover, .next:hover { background-color: rgba(0, 0, 0, 0.6); }

        /* --- Caption Styles --- */
        .caption-container { text-align: center; padding: 10px 0 5px 0; color: var(--text-secondary); font-size: 0.9rem; min-height: 1.5em; font-style: italic; transition: opacity 0.15s ease-in-out; }

        /* --- Responsive Adjustments --- */
        @media (max-width: 768px) {
             body { padding: 30px 15px; } header { margin-top: 60px; } .project-preview { padding: 15px; gap: 15px; }
             .project-item.active .project-details { padding: 20px; } .preview-image-container { width: 70px; height: 70px; border-radius: 8px;}
             .project-preview h3 { font-size: 1.1rem; padding-right: 30px; } .project-preview .meta { font-size: 0.85rem;}
             .preview-company-logo { height: 16px; } .preview-icon { margin-left: 10px; font-size: 1.2rem; }
             .prev, .next { font-size: 16px; padding: 12px; } .slide img { max-height: 400px; }
        }
    </style>
</head>
<body>

    <header>
        <h1>Work Projects</h1>
        <a href="index.html" class="back-link">&larr; Back to Home</a>
    </header>

    <ul class="project-list">
        <li class="project-item" data-project-id="tesla-cell">
            <div class="project-preview">
                 <div class="preview-image-container">
                    <img src="images/tesla-cybertruck-seats.png" alt="Custom rejection chute CAD model" class="active">
                    <img src="images/tesla-robot-arm.jpg" alt="Fanuc robot arm in assembly cell">
                    <img src="images/tesla-cell-layout.png" alt="Assembly cell layout diagram">
                </div>
                <div class="preview-text">
                    <h3>Cybertruck Robotic Cell Re-Design</h3>
                    <p class="meta">Role: Equipment Engineering Intern @ Tesla</p>
                     <img src="images/logo-tesla.png" alt="" class="preview-company-logo">
                </div>
                <span class="preview-icon">›</span>
            </div>
            <div class="project-details">
                <div class="slideshow-container">
                    <div class="slide active"><img src="images/tesla-cybertruck-seats.png" alt="Custom rejection chute CAD model"></div>
                    <div class="slide"><img src="images/tesla-robot-arm.jpg" alt="Fanuc robot arm in assembly cell"></div>
                    <div class="slide"><img src="images/tesla-cell-layout.png" alt="Assembly cell layout diagram"></div>
                    <a class="prev" onclick="manualSlideChange('tesla-cell', -1)">&#10094;</a>
                    <a class="next" onclick="manualSlideChange('tesla-cell', 1)">&#10095;</a>
                </div>
                <div class="caption-container"></div>
                <div class="project-description">
                    <p><strong>Problem:</strong> A key robotic cell on the Cybertruck production line was improperly disposing of rejected seat structures, dropping them on the floor. This resulted in hundreds of thousands of dollars in annual material scrap, frequent production downtime for manual retrieval, and created a safety hazard for associates entering the cell.</p>
                    <p><strong>My Solution:</strong> As the sole owner of this project, I engineered a complete mechanical and robotics solution. I designed a custom, non-intrusive rejection chute from the ground up using Solidworks and Siemens NX, ensuring it integrated seamlessly into the existing cell's tight footprint. I then single-handedly reprogrammed the entire Fanuc robotic logic, rewriting the pathing to flawlessly deposit rejected parts into the new assembly.</p>
                    <p><strong>Results:</strong> I drove the project through the full lifecycle, leading a cross-functional team of stakeholders from manufacturing, compliance, and testing to successfully implement my design. The solution completely eliminated the scrap issue and associated downtime, delivering an annual savings of <b>over $175,000</b> while improving cell safety and maintaining the original workflow for production associates.</p>
                </div>
            </div>
        </li>

        <li class="project-item" data-project-id="lm-integration">
            <div class="project-preview">
                 <div class="preview-image-container"> <img src="images/lockheed-system-integration.png" alt="CSC Ship Rendering by Mechanical Design Team" class="active">
                    <img src="images/laser_photo.png" alt="Unclassified Example: Similar Laser Warning System">
                    <img src="images/laser_3.png" alt="Unclassified Example: Similar System Integration">
                 </div>
                <div class="preview-text">
                    <h3>Advanced Classified System Design TPM</h3>
                    <p class="meta">Role: Mechanical Design TPM Intern @ Lockheed Martin</p>
                    <img src="images/logo-lockheed.png" alt="" class="preview-company-logo">
                </div>
                <span class="preview-icon">›</span>
            </div>
            <div class="project-details">
                 <div class="slideshow-container"> <div class="slide active"><img src="images/lockheed-system-integration.png" alt="CSC Ship Rendering by Mechanical Design Team"></div>
                    <div class="slide"><img src="images/laser_photo.png" alt="Unclassified Example: Similar Laser Warning System"></div>
                    <div class="slide"><img src="images/laser_3.png" alt="Unclassified Example: Similar System Integration"></div>
                    <a class="prev" onclick="manualSlideChange('lm-integration', -1)">&#10094;</a>
                    <a class="next" onclick="manualSlideChange('lm-integration', 1)">&#10095;</a>
                </div>
                 <div class="caption-container"></div>
                 <div class="project-description">
                    <p><strong>Problem:</strong> Tasked as the integration lead for a proprietary, mission-critical system on the CSC, I was responsible for navigating conflicting constraints from external vendors and internal RF, electrical, structural, and mechanical design teams. The challenge was to find a viable integration path that did not compromise system performance, ship layout, or classified design integrity, including necessitating <b>redesign of sections of the ship's hull</b>.</p>
                    <p><strong>My Solution:</strong> I took extreme ownership, serving as the single point of contact between <b>4 key vendors and internal cross-functional teams</b>. Leveraging my security clearance which vendors lacked, I <b>personally took the initiative</b> to drive the technical design iterations within the classified environment. Using SolidWorks, I modeled and proposed design changes to resolve complex physical, thermal, and RF constraints, and <b>led the hull redesign effort</b> collaborating with the internal mechanical team and the primary structural vendor. My key responsibility was distilling highly technical, classified requirements into actionable, unclassified tasks for vendors.</p>
                    <p><strong>Results:</strong> By <b>leading the integration and design iterations with vendors and presenting solutions to upper management</b>, I successfully aligned all stakeholders on a final, approved integration path, including the necessary hull modifications. This cleared a major bottleneck for a critical program milestone, ensuring the project remained on schedule while meeting all system requirements within a secure framework.</p>
                 </div>
            </div>
        </li>

         <li class="project-item" data-project-id="lm-topside">
            <div class="project-preview">
                 <div class="preview-image-container">
                     <img src="images/lockheed-topside-design.png" alt="CAD rendering of naval ship topside equipment layout" class="active">
                     <img src="images/LOS.png" alt="SolidWorks Line-of-Sight (LOS) dome analysis tool">
                     <img src="images/rf_pattern.png" alt="Example RF antenna pattern analysis consideration">
                 </div>
                <div class="preview-text">
                     <h3>CSC Topside Mechanical Design & Integration</h3>
                    <p class="meta">Role: Mechanical Design TPM Intern @ Lockheed Martin</p>
                    <img src="images/logo-lockheed.png" alt="" class="preview-company-logo">
                </div>
                 <span class="preview-icon">›</span>
            </div>
            <div class="project-details">
                <div class="slideshow-container">
                    <div class="slide active"><img src="images/lockheed-topside-design.png" alt="CAD rendering of naval ship topside equipment layout"></div>
                    <div class="slide"><img src="images/LOS.png" alt="SolidWorks Line-of-Sight (LOS) dome analysis tool"></div>
                     <div class="slide"><img src="images/rf_pattern.png" alt="Example RF antenna pattern analysis consideration"></div>
                    <a class="prev" onclick="manualSlideChange('lm-topside', -1)">&#10094;</a>
                    <a class="next" onclick="manualSlideChange('lm-topside', 1)">&#10095;</a>
                </div>
                <div class="caption-container"></div>
                <div class="project-description">
                    <p><strong>Problem:</strong> Relocating critical topside equipment on the CSC required complex mechanical integration solutions to satisfy competing constraints from RF performance, thermal loads, structural integrity, aerodynamic factors, and vendor specifications. Failure to find mechanically sound placements would impact system functionality and project timelines.</p>
                    <p><strong>My Solution:</strong> I led the mechanical design effort for several key equipment placements. This involved creating detailed feasibility studies and 3D models in SolidWorks, utilizing tools like Line-of-Sight analysis to evaluate integration options against all constraints. I collaborated closely with internal RF, Thermal, and Aero analysis teams to incorporate their findings into the mechanical designs, and worked directly with equipment vendors to ensure mechanical compatibility. I then presented the technical trade-offs and <b>proposed recommended solutions to senior management</b>.</p>
                    <p><strong>Results:</strong> My mechanical design analyses and cross-functional leadership resulted in the successful approval and implementation path for <b>9 critical equipment placements</b> within 4 months. This work ensured the mechanical integrity and functional performance of the topside systems while balancing complex interdisciplinary requirements.</p>
                </div>
                 <div class="details-links">
                     <a href="images/Mech_Design_Lockheed_TW.pdf" target="_blank">View Project Context PDF</a>
                 </div>
            </div>
        </li>

        <li class="project-item" data-project-id="lm-cfd">
            <div class="project-preview">
                  <div class="preview-image-container">
                     <img src="images/lockheed-cfd.png" alt="CFD thermal analysis of helicopter landing deck" class="active">
                     <img src="images/cfd-mesh-example.png" alt="Example CFD Mesh">
                     <img src="images/thermal-logic-board.jpg" alt="Thermal Logic Board Diagram">
                  </div>
                 <div class="preview-text">
                    <h3>Helicopter Landing Thermal Analysis (CFD)</h3>
                    <p class="meta">Role: Aerodynamics/RF Engineering Intern @ Lockheed Martin</p>
                    <img src="images/logo-lockheed.png" alt="" class="preview-company-logo">
                 </div>
                <span class="preview-icon">›</span>
            </div>
            <div class="project-details">
                <div class="slideshow-container">
                    <div class="slide active"><img src="images/lockheed-cfd.png" alt="CFD thermal analysis of helicopter landing deck"></div>
                    <div class="slide"><img src="images/cfd-mesh-example.png" alt="Example CFD Mesh"></div>
                    <div class="slide"><img src="images/thermal-logic-board.jpg" alt="Thermal Logic Board Diagram"></div>
                    <a class="prev" onclick="manualSlideChange('lm-cfd', -1)">&#10094;</a>
                    <a class="next" onclick="manualSlideChange('lm-cfd', 1)">&#10095;</a>
                </div>
                <div class="caption-container"></div>
                <div class="project-description">
                     <p><strong>Problem:</strong> The Canadian Surface Combatant (CSC) program...</p>
                     <p><strong>My Solution:</strong> I developed the foundational thermodynamic model...</p>
                     <p><strong>Results:</strong> My simulations generated thermal contour maps...</p>
                </div>
            </div>
        </li>

         <li class="project-item" data-project-id="lm-los">
            <div class="project-preview">
                 <div class="preview-image-container">
                    <img src="images/lockheed-los-analysis.png" alt="Line-of-sight analysis diagram for naval ship" class="active">
                     <img src="images/los-discrepancy-example.png" alt="Diagram showing LOS analysis discrepancy">
                 </div>
                <div class="preview-text">
                     <h3>Company-Wide Line-of-Sight (LOS) Process Overhaul</h3>
                     <p class="meta">Role: Naval Architecture Engineering Intern @ Lockheed Martin</p>
                     <img src="images/logo-lockheed.png" alt="" class="preview-company-logo">
                </div>
                 <span class="preview-icon">›</span>
             </div>
             <div class="project-details">
                 <div class="slideshow-container">
                    <div class="slide active"><img src="images/lockheed-los-analysis.png" alt="Line-of-sight analysis diagram for naval ship"></div>
                     <div class="slide"><img src="images/los-discrepancy-example.png" alt="Diagram showing LOS analysis discrepancy"></div>
                     <a class="prev" onclick="manualSlideChange('lm-los', -1)">&#10094;</a>
                     <a class="next" onclick="manualSlideChange('lm-los', 1)">&#10095;</a>
                 </div>
                 <div class="caption-container"></div>
                 <div class="project-description">
                     <p><strong>Problem:</strong> The existing company procedure...</p>
                     <p><strong>My Solution:</strong> After identifying the root cause...</p>
                     <p><strong>Results:</strong> The new procedure I developed...</p>
                </div>
            </div>
        </li>

        <li class="project-item" data-project-id="rtx-auto">
             <div class="project-preview">
                  <div class="preview-image-container">
                     <img src="images/rtx-automation.png" alt="Process automation flowchart for SAP data extraction" class="active">
                     <img src="images/vba-macro-example.png" alt="Example VBA code snippet">
                     <img src="images/sap-screenshot.png" alt="Example SAP Interface">
                  </div>
                <div class="preview-text">
                    <h3>Production Line Data Automation</h3>
                    <p class="meta">Role: Aerospace Engineering and Logistics Intern @ RTX (Pratt & Whitney)</p>
                     <img src="images/logo-rtx.png" alt="" class="preview-company-logo">
                </div>
                 <span class="preview-icon">›</span>
             </div>
            <div class="project-details">
                 <div class="slideshow-container">
                    <div class="slide active"><img src="images/rtx-automation.png" alt="Process automation flowchart for SAP data extraction"></div>
                     <div class="slide"><img src="images/vba-macro-example.png" alt="Example VBA code snippet"></div>
                     <div class="slide"><img src="images/sap-screenshot.png" alt="Example SAP Interface"></div>
                    <a class="prev" onclick="manualSlideChange('rtx-auto', -1)">&#10094;</a>
                    <a class="next" onclick="manualSlideChange('rtx-auto', 1)">&#10095;</a>
                </div>
                 <div class="caption-container"></div>
                 <div class="project-description">
                    <p><strong>Problem:</strong> Strategic decisions for optimizing...</p>
                    <p><strong>My Solution:</strong> I took the initiative...</p>
                    <p><strong>Results:</strong> My script completely eliminated...</p>
                </div>
            </div>
        </li>
    </ul>

    <footer>
        <p>
            <a href="images/resume.pdf" target="_blank"> Download Resume</a> ·
            <a href="mailto:thomaswatson1188@gmail.com">Email Me</a> ·
            <a href="https://linkedin.com/in/thomaswatsonn" target="_blank">LinkedIn</a>
        </p>
        <p>© 2025 Thomas Watson</p>
    </footer>

    <script>
        // --- Accordion Logic & Slideshow Data ---
        const projectItems = document.querySelectorAll('.project-item');
        const slideshowData = {};
        const previewSlideshowData = {};

        // --- Initialize Data ---
        function initializeSlideshow(projectId) {
            if (!slideshowData[projectId]) {
                 const projectItem = document.querySelector(`.project-item[data-project-id="${projectId}"]`);
                 const slides = projectItem.querySelectorAll('.project-details .slide');
                 const captions = Array.from(slides).map(slide => slide.querySelector('img').alt || '');
                slideshowData[projectId] = {
                    slideIndex: 0, slides: slides, captions: captions, timer: null,
                    captionElement: projectItem.querySelector('.project-details .caption-container')
                };
            }
        }
        function initializePreviewSlideshow(projectId) {
            if (!previewSlideshowData[projectId]) {
                 const projectItem = document.querySelector(`.project-item[data-project-id="${projectId}"]`);
                 const previewContainer = projectItem.querySelector('.preview-image-container');
                 const previewImages = previewContainer.querySelectorAll('img');
                previewSlideshowData[projectId] = {
                    previewIndex: 0, previewImages: previewImages, previewTimer: null
                };
            }
        }

        // --- Show Specific Preview Image ---
        function showPreviewImage(projectId, index) {
             initializePreviewSlideshow(projectId);
             const data = previewSlideshowData[projectId];
             if (!data || !data.previewImages || data.previewImages.length === 0) return;
             if (index >= data.previewImages.length) { index = 0; }
             if (index < 0) { index = data.previewImages.length - 1; }
             data.previewImages.forEach(img => img.classList.remove('active'));
             data.previewImages[index].classList.add('active');
             data.previewIndex = index;
        }

        // --- Start/Stop Preview Auto Slide ---
        function startPreviewAutoSlide(projectId) {
             initializePreviewSlideshow(projectId);
             const data = previewSlideshowData[projectId];
             if (!data || data.previewImages.length <= 1) return;
             stopPreviewAutoSlide(projectId);
             showPreviewImage(projectId, 0); // Start immediately
             data.previewTimer = setInterval(() => { showPreviewImage(projectId, data.previewIndex + 1); }, 3000);
        }
        function stopPreviewAutoSlide(projectId) {
             if (previewSlideshowData[projectId] && previewSlideshowData[projectId].previewTimer) {
                 clearInterval(previewSlideshowData[projectId].previewTimer);
                 previewSlideshowData[projectId].previewTimer = null;
             }
        }

        // --- Full Slideshow Logic ---
        function showSlide(projectId, index) {
            initializeSlideshow(projectId);
            const data = slideshowData[projectId];
            if (!data || !data.slides || data.slides.length === 0) return;
            if (index >= data.slides.length) { index = 0; }
            if (index < 0) { index = data.slides.length - 1; }
            data.slides.forEach(slide => slide.classList.remove('active'));
            data.slides[index].classList.add('active');
            data.slideIndex = index;
             if (data.captionElement) {
                data.captionElement.style.opacity = 0;
                setTimeout(() => {
                    data.captionElement.textContent = data.captions[index] || '';
                    data.captionElement.style.opacity = 1;
                }, 150);
            }
         }
        function manualSlideChange(projectId, n) {
             initializeSlideshow(projectId);
            const data = slideshowData[projectId];
             stopAutoSlide(projectId); // Stop main timer
            showSlide(projectId, data.slideIndex + n);
             setTimeout(() => startAutoSlide(projectId), 8000); // Restart main timer after delay
         }
        function startAutoSlide(projectId) {
             initializeSlideshow(projectId);
            const data = slideshowData[projectId];
            if (!data || data.slides.length <= 1) return;
            stopAutoSlide(projectId); // Clear existing timer first
             data.timer = setInterval(() => {
                showSlide(projectId, data.slideIndex + 1);
            }, 5000);
        }
        function stopAutoSlide(projectId) {
            if (slideshowData[projectId] && slideshowData[projectId].timer) {
                clearInterval(slideshowData[projectId].timer);
                slideshowData[projectId].timer = null;
            }
        }

        // --- Accordion Click Handler ---
        projectItems.forEach(item => {
            const summary = item.querySelector('.project-preview');
            const projectId = item.getAttribute('data-project-id');

            startPreviewAutoSlide(projectId); // Start all previews initially

            summary.addEventListener('click', () => {
                const wasActive = item.classList.contains('active');
                const list = item.closest('.project-list');

                // Close others first
                projectItems.forEach(otherItem => {
                    if (otherItem !== item && otherItem.classList.contains('active')) {
                        otherItem.classList.remove('active');
                        const otherProjectId = otherItem.getAttribute('data-project-id');
                        stopAutoSlide(otherProjectId); // Stop main slideshow
                        startPreviewAutoSlide(otherProjectId); // Restart preview
                    }
                });

                // Toggle clicked item
                item.classList.toggle('active');

                if (!wasActive) { // Item is NOW active/open
                    list.classList.add('item-active');
                    stopPreviewAutoSlide(projectId); // Stop THIS preview slide
                    initializeSlideshow(projectId);
                    showSlide(projectId, 0); // Show first slide immediately
                    startAutoSlide(projectId); // Start main slide timer
                } else { // Item is NOW inactive/closed
                    list.classList.remove('item-active');
                    stopAutoSlide(projectId); // Stop main slide timer
                    startPreviewAutoSlide(projectId); // Restart preview slide timer
                }
            });
        });

        // Add transition to caption container CSS
         const styleSheet = document.styleSheets[0];
         try {
             styleSheet.insertRule('.caption-container { transition: opacity 0.15s ease-in-out; }', styleSheet.cssRules.length);
             styleSheet.insertRule('.project-list.item-active .project-item:not(.active) { transition: opacity 0.4s ease, max-height 0.4s ease, margin-bottom 0.4s ease, border-color 0.4s ease, background-color 0.4s ease, box-shadow 0.4s ease; }', styleSheet.cssRules.length);
         } catch (e) { console.error("Could not insert CSS rule: ", e); }

    </script>

</body>
</html>
